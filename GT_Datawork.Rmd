---
title: "GT_Datawork"
author: "migs" 
date: "2024-05-03"
output: github_document
---

```{r library, echo = T }
library(ggplot2)
library(magrittr)
library(readr)
library(RCurl)
library(tidyr)
library(tidyverse)

```


```{r data import, echo = F}
logger_A_data <- read.csv("~/GitHub/GillData/logger_A_data.csv", na.strings="#N/A")
logger_C_data <- read.csv("~/GitHub/GillData/logger_C_data.csv", na.strings="#N/A")
logger_D_data <- read.csv("~/GitHub/GillData/logger_D_data.csv", na.strings="#N/A")
logger_E_data <- read.csv("~/GitHub/GillData/logger_E_data.csv", na.strings="#N/A")
logger_F_data <- read.csv("~/GitHub/GillData/logger_F_data.csv", na.strings="#N/A")
logger_G_data <- read.csv("~/GitHub/GillData/logger_G_data.csv", na.strings="#N/A")

#head(logger_A_data)
```

```{r labeling loggers and data hygeine, echo = F}
#Logger A
logger_A_data <- logger_A_data %>% 
  mutate(logger = "A") %>% 
  rename(Datetimes = "z6.07504")

#view(logger_A_data)

#Logger C
logger_C_data <- logger_C_data %>% 
  mutate(logger = "C") %>% 
  rename(Datetimes = "z6.07590")

#view(logger_C_data)

#Logger D
logger_D_data <- logger_D_data %>% 
  mutate(logger = "D") %>% 
  rename(Datetimes = "z6.07591")

#view(logger_D_data)

#Logger E
logger_E_data <- logger_E_data %>% 
  mutate(logger = "E") %>% 
  rename(Datetimes = "z6.07506")

#view(logger_E_data)

#Logger F
logger_F_data <- logger_F_data %>% 
  mutate(logger = "F") %>% 
  rename(Datetimes = "z6.07592")

view(logger_F_data)


#Logger G
logger_G_data <- logger_G_data %>% 
  mutate(logger = "G") %>% 
  rename(Datetimes = "z6.07509")

view(logger_G_data)

#Combining all loggers' data
combined_data <- rbind(logger_A_data, logger_C_data, logger_D_data, logger_E_data, logger_F_data, logger_G_data)

```

```{r data transforming, echo = F}
#transposing  data
unique_columns <- c("Port.1", "Port.2", "Port.3", "Port.4", "Port.5", "Port.6")

transposed_data_A <- pivot_longer(logger_A_data, cols = all_of(unique_columns), names_to = "Port", values_to = "WaterAmt")

# Renaming columns
dataframe_A <- transposed_data_A %>% 
  rename(Datetimes = "z6.07504") %>% 
  select(Datetimes, Port, WaterAmt)

#Conversion char to POSIXct (unix time)
dataframe_A$Datetimes <- as.POSIXct(dataframe_A$Datetimes, format = "%m/%d/%y %H:%M", tz = "")
#class(dataframe_A$Datetimes)

#Adding in Treatments, Fallow Y/N
dataframe_A <- dataframe_A %>% 
  mutate(Treatment = case_when(
    Port == "Port.1" ~ "Rye-Radish",
    Port == "Port.2" ~ "Rye-Radish",
    Port == "Port.3" ~ "Rye-Radish",
    Port == "Port.4" ~ "Rye-Vetch",
    Port == "Port.5" ~ "Rye-Vetch",
    Port == "Port.6" ~ "Rye-Vetch"
  ))

#Adding in Depths
dataframe_A <- dataframe_A %>% 
  mutate(Depth.cm =case_when(
    Port == "Port.1" ~ "15",
    Port == "Port.2" ~ "30",
    Port == "Port.3" ~ "60",
    Port == "Port.4" ~ "15",
    Port == "Port.5" ~ "30",
    Port == "Port.6" ~ "60"
  ))

view(dataframe_A)


```


```{r visualizations, echo = T}
#Timestamp vs. Water Content, color = Depth
ggplot(dataframe_A, aes(x = Datetimes, y = WaterAmt, color = Depth.cm)) +
  geom_point() + 
  scale_y_continuous(limits = c(0.18, 0.37)) ##Removes negative values from calibration


#Timestamp vs. Water Content, color = Treatment
ggplot(dataframe_A, aes(x = Datetimes, y = WaterAmt, color = Treatment)) +
  geom_point() + 
  scale_y_continuous(limits = c(0.18, 0.37)) ##Removes negative values from calibration
```

```{r Visualizations 2, echo = T}





```